<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>MarkLogic Fundamentals</title>
<link href="../css/ml.css" rel="stylesheet" type="text/css">
</head>

<body>
<p><img src="../images/general/Marklogic-University-RGB.png" alt="" width="130" height="38" class="logo-padding"/></p>
<p class="exercise-heading">Exercise: <strong>Organize Documents</strong></p>
<p>In this walkthrough exercise, you use directories and collections.</p>
<p>&nbsp;</p>
<ol class="exercise-step">
  <li class="exercise-step">In <strong>Query Console</strong>, with the <strong>patents</strong> database selected, click the <strong>Explore</strong> button, to see the documents listed:<br>
    <br>
    <img src="../images/unit05/patents_all.png" alt="" width="568" height="203" class="image-border"/><br>
  </li>
  <li class="exercise-step">  <strong>Notice</strong> that the URIs all start with /patents/.</li>
  <li class="exercise-step">Click the <strong>+</strong> button to create a new tab in Query Console.</li>
  <li class="exercise-step">With the <strong>patents </strong>database and <strong>JavaScript</strong> selected, enter the following and click the <strong>Run</strong> button:<br>
    <br>
    <span class="code">xdmp.directory('/patents/')</span>;<br>
  </li>
  <li class="exercise-step">See that all of the patent documents are returned:<br>
    <br>
    <img src="../images/unit05/all_patents.png" width="690" height="265" class="image-border"><br>
  </li>
  <li class="exercise-step"><strong>Modify</strong> the directory name to <span class="code">/<strong>p</strong>patents/</span> and click Run:<br>
    <br>
  <span class="code">xdmp.directory('/<strong>p</strong>patents/')</span></li>
  <li class="exercise-step">See that no documents are returned.</li>
  <li class="exercise-step"><strong>Imagine</strong> having all sorts of documents in your database, and yet be  able to reference a group of them by the directory name in their URIs.</li>
</ol>
<p>Work with collections:</p>
<ol class="exercise-step" start="9">
  <li class="exercise-step">Click the <strong>+</strong> button to create a new tab.</li>
  <li class="exercise-step">Enter the following to assign collections to one of the documents (unit05/<strong>ex03a.txt</strong>):<br>
    <br>
    <span class="code">declareUpdate(); <br>
    xdmp.documentAddCollections('/patents/tuning_ukulele.json', ['music', 'instrument', 'hobby']);<br>
    </span></li>
  <li class="exercise-step"> Click the <strong>Run</strong> button.</li>
  <li class="exercise-step">Click the <strong>Explore</strong> button.</li>
  <li class="exercise-step">In the <strong>Collections</strong> column, <strong>see</strong> that the document belongs to the  collections:<br>
    <br>
    <img src="../images/unit05/collections.png" width="700" height="180" class="image-border"><br>
  </li>
  <li class="exercise-step">Click the <strong>+</strong> button to create a new tab.</li>
  <li class="exercise-step">Enter the following, and click the <strong>Run</strong> button:<br>
    <br>
  <span class="code">fn.collection('hobby'); </span></li>
  <li class="exercise-step"><strong>See</strong> that only documents in the hobby collection are returned:<br>
    <br>
    <img src="../images/unit05/hobby.png" width="665" height="173" class="image-border"><br>
  </li>
  <li class="exercise-step">If desired, assign more documents to collections. </li>
  <li class="exercise-step">If desired, use the xdmp.documentRemoveCollections() function to remove a document from a collection (<strong>ex03b.txt</strong>):<em><br>
    <br>
</em><span class="code">declareUpdate(); <br>
xdmp.documentRemoveCollections('/patents/tuning_ukulele.json', ['instrument']);</span><br>
    </li>
</ol>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>Next: <a href="0504_assigning_document_permissions.htm" class="exercise-link">Topic (Assigning Document Permissions)</a></p>
<p>Back: <a href="0503_organizing_documents.htm">Previous</a></p>
<hr>
<p class="copyright">Â©2015-2020 MarkLogic Corporation. All rights reserved. Copying, selling, or otherwise distributing any part of this course without prior written consent of an authorized representative of MarkLogic Corporation is prohibited.</p>
</body>
</html>
